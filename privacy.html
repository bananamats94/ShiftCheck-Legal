<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Privacy Policy – ShiftCheck</title>
    <style>
        :root {
            --bg: #0f172a;
            --text: #e2e8f0;
            --panel: #111827;
            --muted: #94a3b8;
            --accent: #38bdf8;
            --border: #1e293b;
            --shadow: 0 20px 45px rgba(15, 23, 42, 0.55);
            --toggle: rgba(226, 232, 240, 0.3);
        }
        :root[data-theme="light"] {
            --bg: #f8fafc;
            --text: #0f172a;
            --panel: #ffffff;
            --muted: #475569;
            --accent: #3b82f6;
            --border: #e2e8f0;
            --shadow: 0 15px 30px rgba(15, 23, 42, 0.08);
            --toggle: rgba(15, 23, 42, 0.1);
        }
        * { box-sizing: border-box; }
        body {
            margin: 0;
            min-height: 100vh;
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', system-ui, sans-serif;
            padding: 40px 20px;
        }
        .page { max-width: 900px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        header h1 { font-size: 32px; margin: 0; }
        header p { color: var(--muted); margin: 6px 0 0; }
        .toggle { border: 1px solid var(--border); background: var(--panel); color: var(--text); border-radius: 999px; padding: 6px 18px; cursor: pointer; font-size: 13px; }
        section { background: var(--panel); border: 1px solid var(--border); border-radius: 20px; padding: 26px; margin-bottom: 18px; box-shadow: var(--shadow); }
        h2 { margin-top: 0; color: var(--accent); font-size: 20px; }
        p, li { line-height: 1.7; color: var(--muted); }
        ul { padding-left: 20px; }
        .footer { text-align: center; margin-top: 32px; color: var(--muted); font-size: 14px; }
        .impressum-link { color: var(--accent); font-weight: 600; text-decoration: none; }
    </style>
</head>
<body>
    <div class="page">
        <header>
            <div>
                <h1>Privacy Policy</h1>
                <p>ShiftCheck – January 2026</p>
            </div>
            <button class="toggle" id="toggle">Light</button>
        </header>

        <section>
            <h2>1. Data Controller</h2>
            <p>CodeCraft · Matthias Steins<br>
            Stationsweg 69 · 41068 Mönchengladbach · Germany<br>
            Email: <a href="mailto:support@codecraft.de" class="impressum-link">support@codecraft.de</a></p>
        </section>

        <section>
            <h2>2. Collected Data</h2>
            <ul>
                <li>Technical metadata (device model, iOS version, app build)</li>
                <li>Crash reports and diagnostics</li>
                <li>Optional anonymized usage analytics</li>
                <li>App content (shifts, times, notes) remains on your device</li>
                <li>Anonymous Firebase authentication (no email, no name)</li>
            </ul>
        </section>

        <section>
            <h2>3. Community Calibration (Crowd Data)</h2>
            <p>After scanning a payslip, <strong>automatically anonymized data points</strong> are sent to our server to improve salary benchmarks for the community. The following data is transmitted:</p>
            <ul>
                <li>Industry (e.g. nursing, retail)</li>
                <li>Region (e.g. state/province)</li>
                <li>Qualification level (1-4, without exact job title)</li>
                <li>Hourly rate (calculated from payslip)</li>
                <li>Bonus percentages (night, Sunday, holiday)</li>
                <li>Tariff ID (selected collective agreement)</li>
            </ul>
            <p><strong>Not transmitted:</strong> Name, employer, email, address, date of birth or other personally identifiable information. User identification uses only a non-traceable hash value for deduplication.</p>
            <p><strong>Retention:</strong> Crowd data points are automatically deleted after 6 months.</p>
            <p><strong>Legal basis:</strong> Legitimate interest (Art. 6(1)(f) GDPR) – improving salary accuracy for all users.</p>
        </section>

        <section>
            <h2>4. AI Analysis (Payslips)</h2>
            <p>ShiftCheck offers two levels of AI analysis:</p>
            <ul>
                <li><strong>Standard Analysis:</strong> OCR-extracted numerical values (gross salary, bonuses, hours) are sent to Google Gemini via Firebase Cloud Functions.</li>
                <li><strong>Enhanced AI Recognition (Gemini Vision):</strong> When local text recognition produces insufficient results, a compressed image of your payslip may be sent to Google Gemini Vision. This only occurs when local OCR quality is inadequate and consumes one AI credit. The image is used solely for numerical value extraction and is not stored.</li>
            </ul>
            <p>All processing occurs on EU servers (europe-west1). Transmitted images are immediately deleted after processing and are not used for model training.</p>
            <p><strong>Hallucination Protection:</strong> Extracted values are automatically validated against anonymized community benchmarks to detect and discard erroneous AI results.</p>
            <p><strong>Legal basis:</strong> Consent (Art. 6(1)(a) GDPR) – analysis is only triggered by active user action and consumes a credit.</p>
        </section>

        <section>
            <h2>5. Schedule Scanner (Privacy-First)</h2>
            <p>ShiftCheck offers a schedule scanner that captures work rosters via camera and automatically creates shift entries. Protecting your colleagues' data is the highest priority:</p>
            <ul>
                <li><strong>Full image stays on your device:</strong> The photo of the complete work schedule never leaves your device at any point. All names and data of your colleagues are processed exclusively on-device and immediately discarded.</li>
                <li><strong>On-device row detection:</strong> Table row recognition is performed entirely on your device using Apple Vision (on-device OCR). No network call is required for this step.</li>
                <li><strong>Privacy Crop:</strong> Before any network communication, a crop is created containing only the header row (weekdays/dates) and your own row. Only this minimal crop is sent to the server.</li>
                <li><strong>AI analysis of the crop:</strong> The privacy crop (2 rows) is sent to Google Gemini Vision via Firebase Cloud Functions to recognize shift codes. This consumes one credit.</li>
                <li><strong>Layout learning:</strong> When recognition quality is high, the table layout is stored locally. Follow-up scans of the same schedule format require no further AI analysis and are free of charge.</li>
            </ul>
            <p><strong>Guarantee:</strong> At no point is any personal data of third parties (colleagues' names, their shifts) transmitted to any server. Processing of this data occurs exclusively on-device.</p>
            <p><strong>Legal basis:</strong> Consent (Art. 6(1)(a) GDPR) – scanning is only triggered by active user action and consumes a credit.</p>
        </section>

        <section>
            <h2>6. External Services</h2>
            <ul>
                <li><strong>Firebase (Google):</strong> Anonymous authentication, Cloud Functions, Firestore (crowd data), push notifications, App Check</li>
                <li><strong>Google Gemini:</strong> AI analysis of payslip values, image-based recognition, and schedule crop analysis (only when actively used, credit-based)</li>
                <li><strong>Apple Vision (on-device):</strong> Local text recognition for schedule rows and payslips – no network communication</li>
                <li><strong>Apple StoreKit:</strong> In-app purchases (processed by Apple)</li>
            </ul>
            <p>All Firebase services run on EU-based servers. No data is shared with advertisers or other third parties.</p>
        </section>

        <section>
            <h2>7. Purpose</h2>
            <p>Data is used solely for bug fixing, stability improvements, improving salary accuracy, and providing AI features. There is no sharing with advertisers or third parties.</p>
        </section>

        <section>
            <h2>8. Your Rights</h2>
            <ul>
                <li>Request an overview of stored data (Art. 15 GDPR)</li>
                <li>Delete data via app removal or request (Art. 17 GDPR)</li>
                <li>Object to community calibration (Art. 21 GDPR)</li>
                <li>Data portability on request (Art. 20 GDPR)</li>
                <li>Lodge a complaint with the competent supervisory authority</li>
            </ul>
        </section>

        <section>
            <h2>9. Imprint</h2>
            <p><a href="impressum.html" class="impressum-link">Imprint &raquo;</a> · <a href="datenschutz.html" class="impressum-link">Deutsch</a></p>
        </section>

        <div class="footer">&copy; 2026 CodeCraft · ShiftCheck</div>
    </div>
    <script>
        (function(){
            const root = document.documentElement;
            const btn = document.getElementById('toggle');
            const stored = localStorage.getItem('site-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initial = stored || (prefersDark ? 'dark' : 'light');
            root.dataset.theme = initial === 'dark' ? '' : 'light';
            btn.textContent = initial === 'dark' ? 'Light' : 'Dark';
            btn.addEventListener('click', () => {
                const next = root.dataset.theme === '' ? 'light' : 'dark';
                root.dataset.theme = next === 'dark' ? '' : 'light';
                localStorage.setItem('site-theme', next);
                btn.textContent = next === 'dark' ? 'Light' : 'Dark';
            });
        })();
    </script>
</body>
</html>
